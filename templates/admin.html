<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>DrPill Admin</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.min.js"></script>
</head>
<body>
    <h1>ğŸ‘¨â€âš•ï¸ DrPill Admin ì œì–´í™”ë©´</h1>

    <div class="button-group">
        <button onclick="sendCommand('open_browser')">ğŸŒ ì—£ì§€ ë¸Œë¼ìš°ì € ì—´ê¸°</button>
        <button onclick="sendCommand('close_browser')">â ì—£ì§€ ë¸Œë¼ìš°ì € ë‹«ê¸°</button>
        <button onclick="sendCommand('start_usb_streaming')">ğŸ“¸ USBìº  ìŠ¤íŠ¸ë¦¬ë° ì‹œì‘</button>
        <button onclick="sendCommand('start_picam_streaming')">ğŸ“¸ PiCam ìŠ¤íŠ¸ë¦¬ë° ì‹œì‘</button>
        <button onclick="sendCommand('stop_streaming')">ğŸ›‘ ìŠ¤íŠ¸ë¦¬ë° ì¤‘ë‹¨</button>
    </div>

    <h2>ğŸ“º ì‹¤ì‹œê°„ ì˜ìƒ</h2>
    <img src="/video_feed" width="640" style="border:1px solid #ccc; margin-top: 10px;" />

    <div id="logs"></div>

    <script>
        const socket = io();

        function sendCommand(command) {
            console.log(`â¡ï¸ ì„œë²„ì— ëª…ë ¹ ì „ì†¡: ${command}`);
            socket.emit('admin_command', {command});
        }

        socket.on('log_message', (msg) => {
            const logs = document.getElementById('logs');
            const p = document.createElement('p');
            p.textContent = msg;
            logs.appendChild(p);
            logs.scrollTop = logs.scrollHeight;
        });
    </script>
</body>
</html>
