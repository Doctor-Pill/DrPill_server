<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>DrPill Admin</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.6.1/socket.io.min.js"></script>
</head>
<body>
    <h1>👨‍⚕️ DrPill Admin 제어화면</h1>

    <div class="button-group">
        <button onclick="sendCommand('open_browser')">🌐 엣지 브라우저 열기</button>
        <button onclick="sendCommand('close_browser')">❎ 엣지 브라우저 닫기</button>
        <button onclick="sendCommand('start_usb_streaming')">📸 USB캠 스트리밍 시작</button>
        <button onclick="sendCommand('start_picam_streaming')">📸 PiCam 스트리밍 시작</button>
        <button onclick="sendCommand('stop_streaming')">🛑 스트리밍 중단</button>
        <button onclick="startFaceDetection()">🧑‍💻 얼굴 인식 시작</button> <!-- 추가 -->
        <button onclick="stopFaceDetection()">🙈 얼굴 인식 중단</button> <!-- 추가 -->
    </div>

    <h2>📺 실시간 영상</h2>
    <img src="/video_feed" width="640" style="border:1px solid #ccc; margin-top: 10px;" />

    <div id="logs"></div>

    <script>
        const socket = io("/admin");

        function sendCommand(command) {
            console.log(`➡️ 서버에 명령 전송: ${command}`);
            socket.emit('admin_command', {command});
        }

        function startFaceDetection() {
            console.log("➡️ 얼굴 인식 시작 명령 전송");
            socket.emit('start_face_detection');
        }

        function stopFaceDetection() {
            console.log("➡️ 얼굴 인식 중단 명령 전송");
            socket.emit('stop_face_detection');
        }

        socket.on('log_message', (msg) => {
            console.log(msg);
            const logs = document.getElementById('logs');
            const p = document.createElement('p');
            p.textContent = msg;
            logs.appendChild(p);
            logs.scrollTop = logs.scrollHeight;
        });
    </script>
</body>
</html>
